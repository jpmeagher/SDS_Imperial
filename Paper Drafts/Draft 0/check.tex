%% Usage: Latex check.tex
%%
%% Utility to test if all the files required for wspc review volume project
%% are available in your present LaTeX path.
%% - ws-rv9x6.cls
%% - ws-crop9x6.sty
%% - crop.sty
%% - rotating.sty
%% - url.sty
%% - makeidx.sty
%% - chapterbib.sty
%% - cite.sty
%% - ws-minitoc.sty
%% - ws-index.sty

\newif\onerror

\typeout{*}
\typeout{1. Searching for LaTeX2e ... }
\ifx\documentclass\undefined
 \typeout{*}
 \typeout{* Fatal error occurred:}
 \typeout{*}
 \typeout{* The WS Review Volume class can only be used with LaTeX2e}
 \typeout{*}
 \typeout{* Stopping...}
 \expandafter\stop
\else
 \typeout{   ... ok}
\fi

\def\next#1/#2/#3\next{#1#2}
\typeout{ }
\typeout{2.  Searching for LaTeX2e version ... }
\ifnum\expandafter\next\fmtversion\next<199612 \relax
 \typeout{*}
 \typeout{* Fatal error occurred:}
 \typeout{*}
 \typeout{* Your LaTeX version is quite outdated, \fmtversion.}
 \typeout{* The WS Review Volume class can only be used with}
 \typeout{* a recent version of LaTeX2e, please upgrade your installation!}
 \typeout{*}
 \expandafter\stop
\else
 \ifnum\expandafter\next\fmtversion\next<199806 \relax
   \typeout{* Warning: }
   \typeout{*}
   \typeout{* Your LaTeX version is outdated, \fmtversion.}
   \typeout{* We believe that it will probably work, but if you encounter}
   \typeout{* problems you will need upgrade your installation.}
   \typeout{*}
   \typein{* Type <return> to continue ...}
   \errortrue
 \else
   \typeout{   ... ok}
 \fi
\fi

\typeout{ }
\typeout{3. Searching for ws-rv9x6.cls ... }
\IfFileExists{ws-rv9x6.cls}
    {
     \typeout{  ... ok}
    }
    {
     \typeout{* ... ws-rv9x6.cls, file not found! }
     \typeout{*}
     \typeout{* Fatal error occurred:}
     \typeout{*}
     \typeout{* The ws-rv9x6 class file which is part of the WS Review Volume distribution}
     \typeout{* must be installed in a directory which is searched by LaTeX.}
     \typeout{*}
     \typeout{* Stopping...}
     \typeout{*}
     \stop
}

\typeout{ }
\typeout{4. Searching for ws-crop9x6.sty ... }
\IfFileExists{ws-crop9x6.sty}
    {
     \typeout{  ... ok}
    }
    {
     \typeout{  ... ws-crop9x6.sty, file not found! }
     \typeout{ }
     \typeout{* Warning:}
     \typeout{*}
     \typeout{* The ws-crop9x6 file which is part of the WS Books distribution}
     \typeout{* must be installed in a directory which is searched by LaTeX.}
     \typeout{*}
     \typeout{* Without this package you will not be able to typeset }
     \typeout{* your book in 9x6 trim size.}
     \typeout{*}
     \typeout{*}
     \typein{* Type <return> to continue ...}
     \errortrue
    }

\typeout{ }
\typeout{5. Searching for crop.sty ... }
\IfFileExists{crop.sty}
    {
     \typeout{  ... ok}
    }
    {
     \typeout{  ... crop.sty, file not found! }
     \typeout{*}
     \typeout{*}
     \typeout{* The crop package, which should be part of a good LaTeX}
     \typeout{* distribution, can not be found.}
     \typeout{*}
     \typeout{* This package is required for printing the crop marks.}
     \typeout{* Try to download this package from a CTAN host.}
     \typeout{* Go to http://www.ctan.org/search.html and search for "crop".}
     \typeout{*}
     \typeout{* Stopping...}
     \typeout{*}
     \stop
}

\typeout{ }
\typeout{6. Searching for rotating.sty ... }
\IfFileExists{rotating.sty}
    {
     \typeout{  ... ok}
    }
    {
     \typeout{  ... rotating.sty, file not found! }
     \typeout{ }
     \typeout{* Warning:}
     \typeout{*}
     \typeout{* The rotating package, which should be part of a good LaTeX}
     \typeout{* distribution, can not be found.}
     \typeout{*}
     \typeout{* Without this package you will not be able to use}
     \typeout{* sidewaysfigure and sidewaystable environments.}
     \typeout{* Try to download this package from a CTAN host.}
     \typeout{* Go to http://www.ctan.org/search.html and search for "rotating".}
     \typeout{*}
     \typein{* Type <return> to continue ...}
     \errortrue
    }

\typeout{ }
\typeout{7. Searching for url.sty ... }
\IfFileExists{url.sty}
    {
     \typeout{  ... ok}
    }
    {
     \typeout{  ... url.sty, file not found! }
     \typeout{ }
     \typeout{* Warning:}
     \typeout{*}
     \typeout{* The url package, which should be part of a good LaTeX}
     \typeout{* distribution, can not be found.}
     \typeout{*}
     \typeout{* Without this package you will not be able to use the \string\url}
     \typeout{* command. Try to download this package from a CTAN host.}
     \typeout{* Go to http://www.ctan.org/search.html and search for "url".}
     \typeout{*}
     \typein{* Type <return> to continue ...}
     \errortrue
    }

\typeout{ }
\typeout{8. Searching for makeidx.sty ... }
\IfFileExists{makeidx.sty}
    {
     \typeout{  ... ok}
    }
    {
     \typeout{  ... makeidx.sty, file not found! }
     \typeout{ }
     \typeout{* Warning:}
     \typeout{*}
     \typeout{* The makeidx package, which should be part of a good LaTeX}
     \typeout{* distribution, can not be found.}
     \typeout{*}
     \typeout{* Without this package you will not be able to generate index.}
     \typeout{* Try to download this package from a CTAN host.}
     \typeout{* Go to http://www.ctan.org/search.html and search for "makeidx".}
     \typeout{*}
     \typein{* Type <return> to continue ...}
     \errortrue
    }

\typeout{ }
\typeout{9. Searching for chapterbib.sty ... }
\IfFileExists{chapterbib.sty}
    {
     \typeout{  ... ok}
    }
    {
     \typeout{  ... chapterbib.sty, file not found! }
     \typeout{ }
     \typeout{* Warning:}
     \typeout{*}
     \typeout{* The chapterbib package, which should be part of a good LaTeX}
     \typeout{* distribution, can not be found.}
     \typeout{*}
     \typeout{* Without this package you will not be able to include separate bibliography for each chapter.}
     \typeout{* Try to download this package from a CTAN host.}
     \typeout{* Go to http://www.ctan.org/search.html and search for "chapterbib".}
     \typeout{*}
     \typein{* Type <return> to continue ...}
     \errortrue
    }

\typeout{ }
\typeout{10. Searching for cite.sty ... }
\IfFileExists{cite.sty}
    {
     \typeout{  ... ok}
    }
    {
     \typeout{  ... cite.sty, file not found! }
     \typeout{ }
     \typeout{* Warning:}
     \typeout{*}
     \typeout{* The cite package, which should be part of a good LaTeX}
     \typeout{* distribution, can not be found.}
     \typeout{*}
     \typeout{* Without this package you will not be able to generate citations in superscript.}
     \typeout{* Try to download this package from a CTAN host.}
     \typeout{* Go to http://www.ctan.org/search.html and search for "cite".}
     \typeout{*}
     \typein{* Type <return> to continue ...}
     \errortrue
    }

\typeout{ }
\typeout{11. Searching for ws-minitoc.sty ... }
\IfFileExists{ws-minitoc.sty}
    {
     \typeout{  ... ok}
    }
    {
     \typeout{  ... ws-minitoc.sty, file not found! }
     \typeout{ }
     \typeout{* Warning:}
     \typeout{*}
     \typeout{* The ws-minitoc package which is part of the WS Review Volume distribution}
     \typeout{* must be installed in a directory which is searched by LaTeX.}
     \typeout{*}
     \typeout{* You can use the ws-rv9x6 class without this package but }
     \typeout{* you can not have chapter level tocs.}
     \typeout{*}
     \typeout{*}
     \typein{* Type <return> to continue ...}
     \errortrue
    }

\typeout{ }
\typeout{12. Searching for ws-rv-har.bst ... }
\IfFileExists{ws-rv-har.bst}
    {
     \typeout{  ... ok}
    }
    {
     \typeout{  ... ws-rv-har.bst, file not found! }
     \typeout{ }
     \typeout{* Warning:}
     \typeout{*}
     \typeout{* The ws-rv-har bibliography style file which is part of the WS Review Volume distribution}
     \typeout{* must be installed in a directory which is searched by LaTeX.}
     \typeout{*}
     \typeout{* You can use the ws-rv9x6 class without this package but }
     \typeout{* you can not use BiBTeX features.}
     \typeout{*}
     \typeout{*}
     \typein{* Type <return> to continue ...}
     \errortrue
    }

\typeout{ }
\typeout{13. Searching for ws-rv-van.bst ... }
\IfFileExists{ws-rv-van.bst}
    {
     \typeout{  ... ok}
    }
    {
     \typeout{  ... ws-rv-van.bst, file not found! }
     \typeout{ }
     \typeout{* Warning:}
     \typeout{*}
     \typeout{* The ws-rv-van bibliography style file which is part of the WS Review Volume distribution}
     \typeout{* must be installed in a directory which is searched by LaTeX.}
     \typeout{*}
     \typeout{* You can use the ws-rv9x6 class without this package but }
     \typeout{* you can not use BiBTeX features.}
     \typeout{*}
     \typeout{*}
     \typein{* Type <return> to continue ...}
     \errortrue
    }

\typeout{ }
\typeout{14. Searching for ws-index.sty ... }
\IfFileExists{ws-index.sty}
    {
     \typeout{  ... ok}
    }
    {
     \typeout{  ... ws-index.sty, file not found! }
     \typeout{ }
     \typeout{* Warning:}
     \typeout{*}
     \typeout{* The ws-index package which is part of the WS RV distribution}
     \typeout{* must be installed in a directory which is searched by LaTeX.}
     \typeout{*}
     \typeout{* You can use the ws-rv9x6 class without this package but }
     \typeout{* you can not use multiple indexes.}
     \typeout{*}
     \typeout{*}
     \typein{* Type <return> to continue ...}
     \errortrue
    }

\typeout{ }
\typeout{* Finished Testing *}
\typeout{ }
\onerror
\typeout{* Some of the files/packages required by WS was not found,}
\typeout{*}
\typeout{* Please review the above comments carefully and update your system.}
\typeout{*}
\typeout{*****************************************************************}
\typein{* Type <return> to continue ...} \else
\typeout{******************************************************}
\typeout{*}
\typeout{* All the files and packages required by WS was found,}
\typeout{* you may now proceed LaTeXing your files.}
\typeout{*}
\typeout{******************************************************} \fi
\stop
\endinput
